<form novalidate #templateForm="ngForm" (change)="model=model">
  <div id="tab-1" class="tab-pane active">
    <div class="panel-body">
      <div class="row">
        <div class="col-lg-6 b-r">
          <div *ngIf="prnRegisterType === '5'" class="form-group">
            <h4>Поиск в реестре МИ</h4>
            <div class="row">
              <div  class="col-lg-6 b-r form-group">
                <label>Регистрационный номер</label>
                <input  id="regNum"  class="form-control edit-control" type="text" name="regNum" >
              </div>
              <div  class="col-lg-6 b-l form-group">
                <label>Торговое название</label>
                <input  id="tradName"  class="form-control edit-control" type="text" name="tradName" >
              </div>
            </div>
            <div>
              <button type="button" class="btn btn-primary" >Поиск</button>
              <button type="button" class="btn btn-primary" >Очистить критерий поиска</button>
            </div>
          </div>

          <div  class="form-group" >
            <div class="custom-control custom-radio radio-inline" >
              <input type="radio" class="custom-control-input radio-primary " name="IsResident" id="ManufacturResident"
                     [(ngModel)]="model.isRes" value="res"
                     (change)="onChangedModel($event.target)">
              <label class="custom-control-label" for="ManufacturResident">Резидент РК</label>
            </div>
            <div class="custom-control custom-radio radio-inline ">
              <input type="radio" class="custom-control-input  radio-primary" name="IsResident" id="ManufacturNoResident"
                     [(ngModel)]="model.isRes" value="unres"
                     (change)="onChangedModel($event.target)">
              <label class="custom-control-label" for="ManufacturNoResident">Нерезидент РК</label>
            </div>
          </div>

          <div *ngIf="model.isRes === 'res'" >
            <label>ИИН/БИН *</label>
            <div class="input-group">
                <input class="form-control edit-control" type="text"  name="IdNumber"   placeholder="____________"
                       #manufacturBin = "ngModel"
                       [textMask] = "{mask: iinMask}"
                       [ngClass]="{'has-error':manufacturBin.invalid && model.isRes !== 'unres'}"
                       [(ngModel)]="model.idNumber"
                       (change)="onChangedModel($event.target)"
                       required
                       ngModel>
              <app-icon-ext-button
                [moduleType]="iModuleType"
                [objectId]="model.id"
                [fieldName]="'declarant.idNumber'"
                [valueField]="model.idNumber">
              </app-icon-ext-button>
            </div><br>
            <button type="button" class="btn btn-sm btn-primary"
                    (click)="searchManufactur(manufacturBin.value)">Найти</button>
            <button type="button" class="btn btn-sm btn-primary" >Отмена</button>
            <!--showErrors === true &&-->
          </div>
          <div *ngIf="model.isRes === 'unres'" >
            <div class="form-group">
              <label>Страна</label>
              <select class="form-control" name="manufacturNoResCountry"
                      #manufacturNoResCountry = "ngModel"
                      [ngClass]="{'has-error':showErrors === true && manufacturNoResCountry.invalid && isRes === 'unres'}"
                      [(ngModel)]="model.manufacturNoResCountry"
                      (change)="searchManufacturNoRes()"
                      required>
                <option></option>
                <option *ngFor="let item of countryVarNoRes" [value]="item.id">{{item.nameRu}}</option>
              </select>
            </div>
          </div>
          <div *ngIf="model.isRes === 'unres'" >
            <div class="form-group">
                <label>Наименование на русском языке *</label>
              <select class="form-control" name="manufacturNoResNameSearch"
                      #manufacturNoResNameSearch = "ngModel"
                      [ngClass]="{'has-error':showErrors === true && manufacturNoResNameSearch.invalid && isRes === 'unres'}"
                      [(ngModel)]="model.manufacturNoResNameSearch"
                      (change)="onChangeNameNoRes()"
                      required>
                <option></option>
                <option [value]="-1">нет данных</option>
                <option *ngFor="let item of listVarNoRes" [value]="item.id">{{item.nameRu}}</option>
              </select>
            </div>
          </div>
          <div *ngIf="viewAddManufacture">
              <div class="form-group ng-hide" >
                По Вашему запросу ничего не найдено!
              </div>
              <div class="form-group ng-hide">
                <button type="button" class="btn btn-sm btn-primary" (click)="createManufactur()">Добавить</button>
              </div>
          </div>
        <br>
          <div class="form-group">
            <label>Организационная форма</label>
            <div class="input-group">
              <select class="form-control" name="OrganizationFormId"
                      #manufacturOrgForm = "ngModel"
                      [ngClass]="{'has-error':showErrors === true && manufacturOrgForm.invalid}"
                      [(ngModel)]="model.manufacturOrgForm"
                      required
                        [disabled]="disabledAddDetail"
                      (change)="onChangedModel($event.target)">
                <option></option>
                <option *ngFor="let item of orgFormVar" [value]="item.id">{{item.nameRu}}</option>
              </select>
              <app-icon-ext-button
                [moduleType]="iModuleType"
                [objectId]="model.id"
                [fieldName]="'declarant.CountryId'"
                [valueField]="model.manufacturOrgForm">
              </app-icon-ext-button>
            </div>
          </div>
          <div class="form-group ng-hide">
            <button type="button" class="btn btn-sm btn-primary" (click)="addOrgForm()"
                    [disabled]="disabledAddDetail">Добавить</button>
          </div>

          <div *ngIf="isAddOrgForm">
              <div class="card card-outline-info text-left">
                <!--<div class="card-header">-->
                  <!--Default card-->
                <!--</div>-->
                <div class="card-body">
                  <div >
                    <div class="form-group">
                      <label>Наименование на государственном языке*</label>
                      <input name="manufacturOrgFormNameKz" #OrgFormNameKz   class="form-control" placeholder="Введите значение"  type="text" >
                    </div>
                  </div>
                  <div >
                    <div class="form-group">
                      <label>Наименование русском языке</label>
                      <input name="manufacturOrgFormNameRu"  #OrgFormNameRu   class="form-control" placeholder="Введите значение"  type="text" >
                    </div>
                  </div>

                </div>
                <div class="card-footer">
                  <div>
                    <button type="button" class="btn btn-sm btn-primary" (click)="saveOrgForm(OrgFormNameKz.value ,OrgFormNameRu.value)">Сохранить</button>
                    <button type="button" class="btn btn-sm btn-primary" (click)="declineOrgForm()">Отменить</button>
                  </div>
                </div>
              </div>
          </div>
          <br>


          <div class="form-group">
            <label>Наименование на государственном языке*</label>
            <div class="input-group">
              <input class="form-control" placeholder="Введите значение"  type="text"  name="NameKz"
                     #manufacturNameKz = "ngModel"
                     [ngClass]="{'has-error':showErrors === true && manufacturNameKz.invalid}"
                     [(ngModel)]="model.manufacturNameKz"
                     [disabled]="disabledAddDetail"
                     required
                     (change)="onChangedModel($event.target)">

            <app-icon-ext-button
              [moduleType]="iModuleType"
              [objectId]="model.id"
              [fieldName]="'declarant.NameKz'"
              [valueField]="model.manufacturNameKz">
            </app-icon-ext-button>
            </div>
          </div>
          <div class="form-group">
            <label>Наименование на русском языке *</label>
            <div class="input-group">
              <input class="form-control" placeholder="Введите значение"  type="text"  name="NameRu"
                     #manufacturNameRu = "ngModel"
                     [ngClass]="{'has-error':showErrors === true && manufacturNameRu.invalid}"
                     [(ngModel)]="model.manufacturNameRu"
                     (change)="onChangedModel($event.target)"
                     [disabled]="disabledAddDetail"
                     required>

            <app-icon-ext-button
              [moduleType]="iModuleType"
              [objectId]="model.id"
              [fieldName]="'declarant.NameRu'"
              [valueField]="model.manufacturNameRu">
            </app-icon-ext-button>
            </div>
          </div>
          <div class="form-group">
            <label>Наименование на английском языке</label>
            <div class="input-group">
              <input class="form-control" placeholder="Введите значение" type="text" name="NameEn"
                     #manufacturNameEn = "ngModel"
                     [ngClass]="{'has-error':showErrors === true && manufacturNameEn.invalid}"
                     [(ngModel)]="model.manufacturNameEn"
                     (change)="onChangedModel($event.target)"
                     [disabled]="disabledAddDetail"
                     required>

            <app-icon-ext-button
              [moduleType]="iModuleType"
              [objectId]="model.id"
              [fieldName]="'declarant.NameEn'"
              [valueField]="model.manufacturNameEn">
            </app-icon-ext-button>
            </div>
          </div>
          <div class="form-group">
            <label>Страна</label>
            <div class="input-group">
            <select class="form-control" name="CountryId"
                    #manufacturCountry = "ngModel"
                    [ngClass]="{'has-error':showErrors === true && manufacturCountry.invalid}"
                    [(ngModel)]="model.manufacturCountry"
                    (change)="onChangedModel($event.target)"
                    [disabled]="disabledAddDetail"
                    required>
              <option></option>
              <option *ngFor="let item of countryVarRes" [value]="item.id">{{item.nameRu}}</option>
            </select>
            <app-icon-ext-button
              [moduleType]="iModuleType"
              [objectId]="model.id"
              [fieldName]="'declarant.CountryId'"
              [valueField]="model.manufacturCountry">
            </app-icon-ext-button>
            </div>
          </div>

          <div class="form-group">
            <h4>Адрес</h4>
            <label>Юридический адрес * </label>
            <div class="input-group">
              <input class="form-control" placeholder="Введите значение"  type="text"   name="LegalAddress"
                     #manufacturAddressLegalRu = "ngModel"
                     [ngClass]="{'has-error':showErrors === true && manufacturAddressLegalRu.invalid}"
                     [(ngModel)]="model.manufacturAddressLegalRu"
                     (change)="onChangedModel($event.target)"
                     [disabled]="disabledAddDetail"
                     required>

            <app-icon-ext-button
              [moduleType]="iModuleType"
              [objectId]="model.id"
              [fieldName]="'declarant.LegalAddress'"
              [valueField]="model.manufacturAddressLegalRu">
            </app-icon-ext-button>
            </div>
          </div>
          <div class="form-group">
            <label>Фактический адрес * </label>
            <div class="input-group">
              <input  placeholder="Введите значение" class="form-control"  type="text"   name="FactAddress"
                     #manufacturAddressFact = "ngModel"
                     [ngClass]="{'has-error':showErrors === true && manufacturAddressFact.invalid}"
                     [(ngModel)]="model.manufacturAddressFact"
                      (change)="onChangedModel($event.target)"
                      [disabled]="disabledAddDetail"
                     required>

            <app-icon-ext-button
              [moduleType]="iModuleType"
              [objectId]="model.id"
              [fieldName]="'declarant.FactAddress'"
              [valueField]="model.manufacturAddressFact">
            </app-icon-ext-button>
            </div>
          </div>
          <div class="form-group">
            <label>Номер телефона * </label>
            <div class="input-group">
              <input type="text"  name="text"  class="form-control" name="Phone"  placeholder="+7 (___) ___-____" require
                     #manufacturPhone = "ngModel"
                     [textMask]="{mask: phoneMask}"
                     [ngClass]="{'has-error':showErrors === true && manufacturPhone.invalid}"
                     [(ngModel)]="model.manufacturPhone"
                     (change)="onChangedModel($event.target)"
                     [disabled]="disabledAddDetail"
                     required>

            <app-icon-ext-button
              [moduleType]="iModuleType"
              [objectId]="model.id"
              [fieldName]="'declarant.Phone'"
              [valueField]="model.manufacturPhone">
            </app-icon-ext-button>
            </div>
          </div>
          <div class="form-group">
            <label>Номер телефона</label>
            <div class="input-group">
              <input name="Phone2" type="text" (change)="onChangedModel($event.target)"
                     [disabled]="disabledAddDetail"
                     [textMask]="{mask: phoneMask}"
                     class="input-medium bfh-phone"  id="manufacturPhone2"  class="form-control"
                     placeholder="+7 (___) ___-____" require
                     [(ngModel)]="model.manufacturPhone2">

            <app-icon-ext-button
              [moduleType]="iModuleType"
              [objectId]="model.id"
              [fieldName]="'declarant.Phone2'"
              [valueField]="model.manufacturPhone2">
            </app-icon-ext-button>
            </div>
          </div>
          <div class="form-group">
            <label>Адрес электронной почты * </label>
            <div class="input-group">
              <input id="manufacturEmail"  class="form-control" placeholder="example@mail.ru"  type="email"    name="Email" ng-pattern=".+@.+\..+"
                     #manufacturEmail = "ngModel"
                     [ngClass]="{'has-error':manufacturEmail.invalid && ( manufacturEmail.dirty || manufacturEmail.touched)}"
                     [(ngModel)]="model.manufacturEmail"
                     (change)="onChangedModel($event.target)"
                     required
                     [disabled]="disabledAddDetail"
                     pattern="[^ @]*@[^ @]*"
                     emailDomain>

            <app-icon-ext-button
              [moduleType]="iModuleType"
              [objectId]="model.id"
              [fieldName]="'declarant.Email'"
              [valueField]="model.manufacturEmail">
            </app-icon-ext-button>
            </div>
          </div>
          <!--showErrors === true-->
        </div>
        <div class="col-lg-6 b-l">
          <div class="form-group">
            <h4>Подписывающее лицо</h4>
            <label>Фамилия первого руководителя *</label>
            <div class="input-group">
              <input  class="form-control" placeholder="Введите значение"  type="text" name = "BossLastName"
                     #manufacturBossLastName = "ngModel"
                     [ngClass]="{'has-error':showErrors === true && manufacturBossLastName.invalid}"
                     [(ngModel)]="model.manufacturBossLastName"
                      (change)="onChangedModel($event.target)"
                      [disabled]="disabledAddDetail"
                     required>

            <app-icon-ext-button
              [moduleType]="iModuleType"
              [objectId]="model.id"
              [fieldName]="'declarant.BossLastName'"
              [valueField]="model.manufacturBossLastName">
            </app-icon-ext-button>
            </div>
          </div>
          <div class="form-group">
            <label>Имя первого руководителя *</label>
            <div class="input-group">
              <input class="form-control" placeholder="Введите значение"  type="text" name="BossFirstName"
                     #manufacturBossFirstName = "ngModel"
                     [ngClass]="{'has-error':showErrors === true && manufacturBossFirstName.invalid}"
                     [(ngModel)]="model.manufacturBossFirstName"
                     (change)="onChangedModel($event.target)"
                     [disabled]="disabledAddDetail"
                     required>
              <app-icon-ext-button
                [moduleType]="iModuleType"
                [objectId]="model.id"
                [fieldName]="'declarant.BossFirstName'"
                [valueField]="model.manufacturBossFirstName">
              </app-icon-ext-button>
            </div>
          </div>
          <div class="form-group">
            <label>Отчество первого руководителя</label>
            <div class="input-group">
              <input class="form-control" placeholder="Введите значение"  type="text" name="BossMiddleName" (change)="onChangedModel($event.target)"
                     [(ngModel)]="model.manufacturBossMiddleName"
                     [disabled]="disabledAddDetail">
            <app-icon-ext-button
              [moduleType]="iModuleType"
              [objectId]="model.id"
              [fieldName]="'declarant.BossMiddleName'"
              [valueField]="model.manufacturBossMiddleName">
            </app-icon-ext-button>
            </div>
          </div>
          <div class="form-group">
            <label>Должность первого руководителя на русском языке *</label>
            <div class="input-group">
              <input name="BossPositionRu"  class="form-control" placeholder="Введите значение"  type="text"
                     #manufacturBossPosition = "ngModel"
                     [ngClass]="{'has-error':showErrors === true && manufacturBossPosition.invalid}"
                     [(ngModel)]="model.manufacturBossPosition"
                     (change)="onChangedModel($event.target)"
                     [disabled]="disabledAddDetail"
                     required>
            <app-icon-ext-button
              [moduleType]="iModuleType"
              [objectId]="model.id"
              [fieldName]="'declarant.BossPositionRu'"
              [valueField]="model.manufacturBossPosition">
            </app-icon-ext-button>
            </div>
          </div>
          <div class="form-group">
            <label>Должность первого руководителя на государственном языке *</label>
            <div class="input-group">
              <input name="BossPositionKz"  class="form-control" placeholder="Введите значение"  type="text"
                     #manufacturBossPositionKz = "ngModel"
                     [ngClass]="{'has-error':showErrors === true && manufacturBossPositionKz.invalid}"
                     [(ngModel)]="model.manufacturBossPositionKz"
                     (change)="onChangedModel($event.target)"
                     [disabled]="disabledAddDetail"
                     required>
            <app-icon-ext-button
              [moduleType]="iModuleType"
              [objectId]="model.id"
              [fieldName]="'declarant.BossPositionKz'"
              [valueField]="model.manufacturBossPositionKz">
            </app-icon-ext-button>
            </div>
          </div>

          <div class="form-group">
            <h4>Банковские реквизиты</h4>
            <label>Наименования банка*</label>
            <div class="input-group">
            <select class="form-control" name="BankId"
                    #manufacturBankName = "ngModel"
                    [ngClass]="{'has-error':showErrors === true && manufacturBankName.invalid}"
                    [(ngModel)]="model.manufacturBankName"
                    (change)="onChangedModel($event.target)"
                    [disabled]="disabledAddDetail"
                    required>
              <option></option>
              <option *ngFor="let item of bankVar" [value]="item.id">{{item.nameRu}}</option>
            </select>
            <app-icon-ext-button
              [moduleType]="iModuleType"
              [objectId]="model.id"
              [fieldName]="'declarant.manufacturBankName'"
              [valueField]="model.BankId">
            </app-icon-ext-button>
            </div>
          </div>



          <div class="form-group">
            <button type="button" class="btn btn-sm btn-primary" (click)="addBankName()"
                    [disabled]="disabledAddDetail">Добавить</button>
          </div>
          <div *ngIf="isAddBankName">
            <div class="card card-outline-info text-left">
              <div class="card-body">
                <div class="form-group">
                  <label>Наименование банка на русском</label>
                  <div>
                    <input id="bankNameRu"  #bankNameRu class="form-control" placeholder="Введите значение"  type="text">
                  </div>
                </div>
                <div class="form-group">
                  <label>Наименование банка на казахском</label>
                  <div>
                    <input id="BankNameKz" #bankNameKz class="form-control" placeholder="Введите значение"  type="text">
                  </div>
                </div>
              </div>
              <div class="card-footer">
                <div>
                  <button type="button" class="btn btn-sm btn-primary" (click)="saveBank(bankNameRu.value,bankNameKz.value)">Сохранить</button>
                  <button type="button" class="btn btn-sm btn-primary" (click)="declineBank()">Отменить</button>
                </div>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label>Расчетный счет *</label>
            <div class="input-group">
              <input name="BankIik"  class="form-control" placeholder="Введите значение" type="text"
                     #manufacturBankIik = "ngModel"
                     [ngClass]="{'has-error':showErrors === true && manufacturBankIik.invalid}"
                     [(ngModel)]="model.manufacturBankIik"
                     (change)="onChangedModel($event.target)"
                     [disabled]="disabledAddDetail"
                     required>

            <app-icon-ext-button
              [moduleType]="iModuleType"
              [objectId]="model.id"
              [fieldName]="'declarant.BankIik'"
              [valueField]="model.manufacturBankIik">
            </app-icon-ext-button>
            </div>
          </div>
          <div class="form-group">
            <label>Валюта *</label>
            <div class="input-group">
            <select class="form-control" name="manufacturCurr" name="CurrencyId"
                    #manufacturCurr = "ngModel"
                    [ngClass]="{'has-error':showErrors === true && manufacturCurr.invalid}"
                    [(ngModel)]="model.manufacturCurr"
                    (change)="onChangedModel($event.target)"
                    [disabled]="disabledAddDetail"
                    required>
              <option></option>
              <option *ngFor="let item of currencyVar" [value]="item.id">{{item.nameRu}}</option>
            </select>
            <app-icon-ext-button
              [moduleType]="iModuleType"
              [objectId]="model.id"
              [fieldName]="'declarant.CurrencyId'"
              [valueField]="model.manufacturCurr">
            </app-icon-ext-button>
            </div>
          </div>
          <div [hidden]="model.isRes !== 'unres'" >
            <div class="form-group ng-scope" >
              <label>SWIFT *</label>
              <div class="input-group">
                <input name="BankSwift" class="form-control" placeholder="Введите значение"  type="text"
                       #manufacturBankSwift = "ngModel"
                       [ngClass]="{'has-error':showErrors === true && manufacturBankSwift.invalid && model.isRes === 'unres'}"
                       [(ngModel)]="model.manufacturBankSwift"
                       (change)="onChangedModel($event.target)"
                       [disabled]="disabledAddDetail"
                       required>
              <app-icon-ext-button
                [moduleType]="iModuleType"
                [objectId]="model.id"
                [fieldName]="'declarant.BankSwift'"
                [valueField]="model.manufacturBankSwift">
              </app-icon-ext-button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

</form>
