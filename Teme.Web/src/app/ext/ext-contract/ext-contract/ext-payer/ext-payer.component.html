<form novalidate #templateForm="ngForm" (change)="model=model">
<div id="tab-3" class="tab-pane">
  <div class="panel-body">
    <div class="row">
      <div class="col-lg-6 b-r">

        <div class="form-group">
          <label>Плательщик</label>
          <select name="ChoosePayer" class="form-control" [(ngModel)]="model.ChoosePayer"  (ngModelChange)="onChoosePayer($event)">
            <option></option>
            <!--<option value="1">Заявитель</option>-->
            <!--<option value="2">Производитель</option>-->
            <!--<option value="3"> Третье лицо</option>-->
            <option *ngFor="let item of items" [value]="item.key">{{item.nameRu}}</option>
          </select>
        </div>

        <div class="form-group">
          <div class="custom-control custom-radio radio-inline" >
            <input type="radio" class="custom-control-input radio-primary" name="IsResident" id="payerResident"  [(ngModel)]="model.isPayerRes" value="res">
            <label class="custom-control-label" for="payerResident" >Резидент РК</label>
          </div>
          <div class="custom-control custom-radio radio-inline">
            <input type="radio" class="custom-control-input radio-primary" name="IsResident" id="payerNoResident" [(ngModel)]="model.isPayerRes" value="unres">
            <label class="custom-control-label" for="payerNoResident">Нерезидент РК</label>
          </div>
        </div>

        <div [hidden]="model.isPayerRes!=='res'" class="form-group">
          <div class="custom-control custom-radio radio-inline" >
            <input type="radio" class="custom-control-input radio-primary" name="IsJuridical" id="payerFL"  [(ngModel)]="model.isPayerJuridical" value="fl"
                   (change)="onChangedModel($event.target)"
                   [disabled]="disabledPayerDetail">
            <label class="custom-control-label" for="payerFL">Физическое лицо</label>
          </div>
          <div class="custom-control custom-radio radio-inline">
            <input type="radio" class="custom-control-input radio-primary" name="IsJuridical" id="payerUl" [(ngModel)]="model.isPayerJuridical" value="ul"
                   [disabled]="disabledPayerDetail"
                    (change)="onChangedModel($event.target)">
            <label class="custom-control-label" for="payerUl">Юридическое лицо</label>
          </div>
        </div>

        <div [hidden]="model.isPayerRes==='unres'" >
          <label>ИИН/БИН *</label>
          <div class="input-group">
            <input name="IdNumber" class="form-control"   type="text"     placeholder="____________"
                   #payerBin = "ngModel"
                   [textMask] = "{mask: iinMask}"
                   [ngClass]="{'has-error':showErrors === true && payerBin.invalid }"
                   [(ngModel)]="model.IdNumber"
                   (change)="onChangedModel($event.target)"
                   [disabled]="disabledPayerDetail"
                   required>
            <app-icon-ext-button
              [moduleType]="iModuleType"
              [objectId]="model.id"
              [fieldName]="'declarant.IdNumber'"
              [valueField]="model.IdNumber">
            </app-icon-ext-button>
          </div><br>
          <button type="button" class="btn btn-sm btn-primary"
                  (click)="searchPayer(payerBin.value)">Найти</button>

          <button type="button" class="btn btn-sm btn-primary" >Отмена</button>
        </div>
        <div [hidden]="model.isPayerRes!=='unres'" >
        <div class="form-group">
          <label>Страна</label>
          <select class="form-control"  name="payerNoRes"
                  #payerNoRes = "ngModel"
                  (change)="searchPayerNoRes()"
                  [ngClass]="{'has-error':showErrors === true && payerNoRes.invalid && model.isPayerRes !== 'unres'}"
                  [(ngModel)]="model.payerNoResCountry"
                  required>
            <option></option>
            <option *ngFor="let item of countryVarNoRes">{{item.nameRu}}</option>
          </select>
        </div>
        </div>
        <div [hidden]="model.isPayerRes!=='unres'" >
          <div class="form-group">
            <label>Наименование на русском языке *</label>
            <select class="form-control" name="payerNoResName"
                    #payerNoResName = "ngModel"
                    (change)="onChangeNameNoRes()"
                    [ngClass]="{'has-error':showErrors === true && payerNoResName.invalid && model.isPayerRes !== 'unres'}"
                    [(ngModel)]="model.payerNoResName"
                    required>
              <option></option>
              <option [value]="-1">нет данных</option>
              <option *ngFor="let item of listVarNoRes" [value]="item.id">{{item.nameRu}}</option>
            </select>
          </div>
        </div>
        <div *ngIf="viewAddPayer">
          <div class="form-group ng-hide" >
            По Вашему запросу ничего не найдено!
          </div>
          <div class="form-group ng-hide" ng-show="payerNotFound">
            <button type="button" class="btn btn-sm btn-primary"
            (click)="createPayer()">Добавить</button>
          </div>
        </div>

        <div >
          <div class="form-group">
            <label>Организационная форма</label>
            <div class="input-group">
            <select class="form-control" name="OrganizationFormId"
                    #payerOrgForm = "ngModel"
                    [ngClass]="{'has-error':showErrors === true && payerOrgForm.invalid}"
                    [(ngModel)]="model.payerOrgForm"
                    (change)="onChangedModel($event.target)"
                    [disabled]="disabledAddDetail"
                    required>
              <option></option>
              <option  *ngFor="let item of orgFormVar" [value]="item.id">{{item.nameRu}}</option>
            </select>
            <app-icon-ext-button
              [moduleType]="iModuleType"
              [objectId]="model.id"
              [fieldName]="'declarant.OrganizationFormId'"
              [valueField]="model.payerOrgForm">
            </app-icon-ext-button>
            </div>
          </div>
        </div>
        <div class="form-group ng-hide">
          <button type="button" class="btn btn-sm btn-primary" (click)="addOrgForm()"
                  [disabled]="disabledAddDetail">Добавить</button>
        </div>

        <div *ngIf="isAddOrgForm">
          <div class="card card-outline-info text-left">
            <!--<div class="card-header">-->
            <!--Default card-->
            <!--</div>-->
            <div class="card-body">
              <div >
                <div class="form-group">
                  <label>Наименование на государственном языке*</label>
                  <input name="OrgFormNameKz" #OrgFormNameKz   class="form-control" placeholder="Введите значение"  type="text" >
                </div>
              </div>
              <div >
                <div class="form-group">
                  <label>Наименование русском языке</label>
                  <input name="OrgFormNameRu"  #OrgFormNameRu   class="form-control" placeholder="Введите значение"  type="text" >
                </div>
              </div>

            </div>
            <div class="card-footer">
              <div>
                <button type="button" class="btn btn-sm btn-primary" (click)="saveOrgForm(OrgFormNameKz.value ,OrgFormNameRu.value)">Сохранить</button>
                <button type="button" class="btn btn-sm btn-primary" (click)="declineOrgForm()">Отменить</button>
              </div>
            </div>
          </div>
        </div>
        <br>
        <div class="form-group">
        <label>Наименование на русском языке *</label>
        <div class="input-group">
          <input class="form-control" placeholder="Введите значение"  type="text"  name="NameRu"
                 #payerNameRu = "ngModel"
                 [ngClass]="{'has-error':showErrors === true && payerNameRu.invalid}"
                 [(ngModel)]="model.payerNameRu"
                 (change)="onChangedModel($event.target)"
                 [disabled]="disabledAddDetail"
                 required>
          <app-icon-ext-button
            [moduleType]="iModuleType"
            [objectId]="model.id"
            [fieldName]="'declarant.NameRu'"
            [valueField]="model.payerNameRu">
          </app-icon-ext-button>
        </div>
      </div>
        <div class="form-group">
          <label>Страна</label>
          <div class="input-group">
          <select class="form-control" name="CountryId"
                  #payerCountry = "ngModel"
                  [ngClass]="{'has-error':showErrors === true && payerNameRu.invalid}"
                  [(ngModel)]="model.payerCountry"
                  (change)="onChangedModel($event.target)"
                  [disabled]="disabledAddDetail"
                  required>
            <option *ngFor="let item of countryVarRes" [value]="item.id">{{item.nameRu}}</option>
          </select>
          <app-icon-ext-button
            [moduleType]="iModuleType"
            [objectId]="model.id"
            [fieldName]="'declarant.CountryId'"
            [valueField]="model.payerCountry">
          </app-icon-ext-button>
          </div>
        </div>
        <div class="form-group">
          <label>Юридический адрес</label>
          <div class="input-group">
            <input id="payerAddressLegalRu" class="form-control" placeholder="Введите значение"  type="text"
                   lass="form-control" name="LegalAddress"
                   #payerAddressLegalRu = "ngModel"
                   [ngClass]="{'has-error':showErrors === true && payerAddressLegalRu.invalid}"
                   [(ngModel)]="model.payerAddressLegalRu"
                   [disabled]="disabledAddDetail"
                   (change)="onChangedModel($event.target)"
                   required>
            <app-icon-ext-button
              [moduleType]="iModuleType"
              [objectId]="model.id"
              [fieldName]="'declarant.LegalAddress'"
              [valueField]="model.payerAddressLegalRu">
            </app-icon-ext-button>
          </div>
        </div>
      </div>
      <div class="col-lg-6 b-l">

        <div class="form-group">
          <label>Название банка</label>
          <div class="input-group">
          <select class="form-control" name="BankId" #payerBankName = "ngModel"
                  #payerBankName="ngModel"
                  [ngClass]="{'has-error':showErrors === true && payerBankName.invalid}"
                  [(ngModel)]="model.payerBankName"
                  (change)="onChangedModel($event.target)"
                  [disabled]="disabledAddDetail"
                  required>
            <option *ngFor="let item of bankVar" [value]="item.id">{{item.nameRu}}</option>
          </select>
          <app-icon-ext-button
            [moduleType]="iModuleType"
            [objectId]="model.id"
            [fieldName]="'declarant.BankId'"
            [valueField]="model.payerBankName">
          </app-icon-ext-button>
          </div>
        </div>

        <div class="form-group">
          <button type="button" class="btn btn-sm btn-primary" (click)="addBankName()"
                  [disabled]="disabledAddDetail">Добавить</button>
        </div>
        <div *ngIf="isAddBankName">
          <div class="card card-outline-info text-left">
            <!--<div class="card-header">-->
            <!--Default card-->
            <!--</div>-->
            <div class="card-body">
              <div class="form-group">
                <label>Наименование банка на русском</label>
                <div>
                  <input id="BankNameRu"  #bankNameRu class="form-control" placeholder="Введите значение"  type="text">
                </div>
              </div>
              <div class="form-group">
                <label>Наименование банка на казахском</label>
                <div>
                  <input id="BankNameKz" #bankNameKz class="form-control" placeholder="Введите значение"  type="text">
                </div>
              </div>
            </div>
            <div class="card-footer">
              <div>
                <button type="button" class="btn btn-sm btn-primary" (click)="saveBank(bankNameRu.value,bankNameKz.value)">Сохранить</button>
                <button type="button" class="btn btn-sm btn-primary" (click)="declineBank()">Оменить</button>
              </div>
            </div>
          </div>
        </div>
        <div [hidden]="model.isPayerRes === 'res'">
        <div class="form-group ng-hide" >
          <label>Расчетный счет/ИИК</label>
          <div class="input-group">
            <input name="BankIik" class="form-control" placeholder="Введите значение"  type="text" ng-disabled="showContactInformationPayer"
                   #payerBankIik="ngModel"
                   [ngClass]="{'has-error':showErrors === true && payerBankIik.invalid }"
                   [(ngModel)]="model.payerBankIik"
                   (change)="onChangedModel($event.target)"
                   [disabled]="disabledAddDetail"
                   required>
            <app-icon-ext-button
              [moduleType]="iModuleType"
              [objectId]="model.id"
              [fieldName]="'declarant.BankIik'"
              [valueField]="model.payerBankIik">
            </app-icon-ext-button>
          </div>
        </div>
        </div>
        <!--<div class="form-group ng-hide" >-->
          <!--<label>Расчетный счет</label>-->
          <!--<div ng-class="{'input-group': showComments}">-->
            <!--<input id="BankIik2" class="form-control" placeholder="Введите значение"  type="text"  required="" >-->
          <!--</div>-->
        <!--</div>-->

        <div class="form-group">
          <label>Валюта *</label>
          <div class="input-group">
          <select class="form-control" name="CurrencyId"
                  #payerBankCurr="ngModel"
                  [ngClass]="{'has-error':showErrors === true && payerBankCurr.invalid}"
                  [(ngModel)]="model.payerBankCurr"
                  (change)="onChangedModel($event.target)"
                  [disabled]="disabledAddDetail"
                  required>
            <option></option>
            <option *ngFor="let item of currencyVar" [value]="item.id">{{item.nameRu}}</option>
          </select>
          <app-icon-ext-button
            [moduleType]="iModuleType"
            [objectId]="model.id"
            [fieldName]="'declarant.CurrencyId'"
            [valueField]="model.payerBankCurr">
          </app-icon-ext-button>
          </div>
        </div>
        <div [hidden]="model.isPayerRes === 'unres'">
        <div class="form-group ng-hide" ng-show="object.Payer.IsResident == true">
          <label>ИИН/БИН</label>
          <div class="input-group">
            <input name="BankBin" class="form-control"  placeholder="Введите значение"  type="text" ng-disabled="true" required=""
                   [disabled]="disabledAddDetail"
                   [(ngModel)]="model.payerBankBin"
                   (change)="onChangedModel($event.target)">
            <app-icon-ext-button
              [moduleType]="iModuleType"
              [objectId]="model.id"
              [fieldName]="'declarant.BankBin'"
              [valueField]="model.payerBankBin">
            </app-icon-ext-button>
          </div>
        </div>
        </div>

        <div [hidden]="model.isPayerRes === 'unres'">
          <div class="form-group ng-hide" >
            <label>БИК</label>
            <div class="input-group">
              <input name="BankIik" class="form-control"  placeholder="Введите значение"  type="text" ng-disabled="true" required=""
                     (change)="onChangedModel($event.target)"
                     [(ngModel)]="model.payerBankIik">
              <app-icon-ext-button
                [moduleType]="iModuleType"
                [objectId]="model.id"
                [fieldName]="'declarant.BankIik'"
                [valueField]="model.payerBankBin">
              </app-icon-ext-button>
            </div>
          </div>
        </div>
        <div [hidden]="model.isPayerRes === 'res'">

        <div class="form-group ng-hide">
          <label>SWIFT</label>
          <!--<label ng-show="object.Payer.IsResident == false" class="ng-hide">SWIFT *</label>-->
          <div class="input-group">
            <input name="BankSwift" class="form-control" placeholder="Введите значение"  type="text"
                   #payerBankSwift="ngModel"
                   [ngClass]="{'has-error':showErrors === true && payerBankSwift.invalid }"
                   [(ngModel)]="model.payerBankSwift"
                   (change)="onChangedModel($event.target)"
                   [disabled]="disabledAddDetail"
                   required>
            <app-icon-ext-button
              [moduleType]="iModuleType"
              [objectId]="model.id"
              [fieldName]="'declarant.BankSwift'"
              [valueField]="model.payerBankSwift">
            </app-icon-ext-button>
          </div>
        </div>
        </div>
      </div>
    </div>
  </div>
</div>
</form>
